/*! mongo_lecture 2015-08-08 */
function getData(){$.ajax({type:"GET",url:"/messenger",success:function(a){writeToDom(a)}})}function writeToDom(a){$(".display").empty(),$.each(a,function(){console.log(this.name),$(".display").append('<div class="card"></div>');var a=$(".display .card").last();a.append('<div class="name">'+this.name+"</div>"),a.append('<div class="message">'+this.message+"</div>"),a.append('<button data-id="'+this._id+'" class="remove-card">Remove</button>')})}$(document).ready(function(){$("#inputForm").submit(function(a){a.preventDefault();var b=$("#inputForm").serialize();console.log(b),$.ajax({type:"POST",url:"/messenger",data:b,success:function(){getData()}})}),$(".display").on("click",".remove-card",function(){$.ajax({type:"DELETE",url:"/messenger/"+$(this).data("id"),success:function(){console.log("Deleting")},error:function(a,b){alert("Error: ",b)},complete:function(){console.log("Delete Complete")}}),$(this).parent().remove()}),getData()});